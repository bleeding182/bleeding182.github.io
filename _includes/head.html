<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="theme-color" media="(prefers-color-scheme: light)" content="#FEFBFF"/>
  <meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1A1110"/>

  <!-- Prevent theme flicker - runs before page render -->
  <script>
    (function() {
      const stored = localStorage.getItem('theme');
      if (stored) {
        document.documentElement.setAttribute('data-theme', stored);
      } else if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.documentElement.setAttribute('data-theme', 'dark');
      }
    })();
  </script>

  <title>
  {%- if page.title -%}
    {{ page.title }}
  {%- else -%}
    {{ site.title }}
  {%- endif -%}
  </title>
  <meta name="description" content="{%- if page.description -%}{{- page.description -}}{%- else -%}{%- if page.excerpt -%}{{- page.excerpt | strip_html | strip_newlines | truncate: 160 -}}{%- else -%}{{- site.description -}}{%- endif -%}{%- endif -%}">

  <link rel="stylesheet" href="{{ "/css/fonts.css" | prepend: site.baseurl }}"/>
  <link rel="stylesheet" href="{{ "/css/site.css" | prepend: site.baseurl }}"/>

  <link rel="canonical" href="{{ page.url | replace:'index.html','' | prepend: site.baseurl | prepend: site.url }}">
  <link rel="alternate" type="application/rss+xml" title="{{ site.title }}" href="{{ "/feed.xml" | prepend: site.baseurl | prepend: site.url }}">

  {%- if paginator.page > 1 -%}
  <meta name="robots" content="noindex">
  {%- endif -%}

  <!-- View Transitions API - Enable crossfade between pages -->
  <!-- Requires Chrome/Edge 126+ (June 2024) - Falls back gracefully in unsupported browsers -->
  <style>
    @view-transition {
      navigation: auto;
    }
  </style>

  <!-- Material Web Components -->
  <script type="module" src="{{ "/assets/bundle.js" | prepend: site.baseurl }}"></script>
</head>
